<h1>Admin Merchants Index</h1>

<%= link_to 'New Merchant', new_admin_merchant_path %>

<div id="admin_merchants_list">
  <div id="enabled_merchants">
    <h2>Enabled Merchants</h2>
    <% @enabled_merchants.each do |merchant| %>
      <div id="admin_merchant_<%= merchant.id %>">
        <p><%= link_to merchant.name, admin_merchant_path(merchant) %>
        <%= button_to 'Disable', admin_merchant_path(merchant), params: { status: 'disabled' }, method: :patch, data: { turbo: false } %></p>
      </div>
    <% end %>
  </div>

  <div id="disabled_merchants">
    <h2>Disabled Merchants</h2>
    <% @disabled_merchants.each do |merchant| %>
      <div id="admin_merchant_<%= merchant.id %>">
        <p><%= link_to merchant.name, admin_merchant_path(merchant) %>
        <%= button_to 'Enable', admin_merchant_path(merchant), params: { status: 'enabled' }, method: :patch, data: { turbo: false } %></p>
      </div>
    <% end %>
  </div>
</div>

<div id="top_5_merchants_by_revenue">
  <h2>Top Merchants</h2>
  <ol>
    <% @top_5_merchants_by_revenue.each do |merchant| %>
      <li><%= link_to merchant.name, admin_merchant_path(merchant) %> - <%= number_to_currency(merchant.total_revenue / 100) %> in sales</li>
      <p>Top day for <%= merchant.name %> was <%= merchant.top_sales_day.strftime("%m/%d/%y") %></p>
    <% end %>
  </ol>
</div>